<template>
  <lightning-card icon-name="custom:custom63">
    <h2 slot="title" class="slds-text-heading_small slds-text-align_center">
      League Table
    </h2>
    <div>
      <template if:true={isLoading}>
        <div class="slds-p-around_medium">
          <lightning-spinner
            alternative-text="Loading league table"
          ></lightning-spinner>
        </div>
      </template>
      <template if:true={hasTeams}>
        <div class="slds-p-around_medium slds-m-top_small">
          <table
            class="slds-table slds-table_cell-buffer slds-table_bordered slds-table_striped"
          >
            <thead>
              <tr class="slds-line-height_reset">
                <th scope="col" class="slds-text-align_center">
                  <div class="slds-truncate" title="#">#</div>
                </th>
                <th scope="col">
                  <div class="slds-truncate" title="Team">Team</div>
                </th>
                <th scope="col" class="slds-text-align_right">
                  <div class="slds-truncate" title="Played">Played</div>
                </th>
                <th scope="col" class="slds-text-align_right">
                  <div class="slds-truncate" title="Points">Points</div>
                </th>
                <th scope="col" class="slds-text-align_right">
                  <div class="slds-truncate" title="Goal Difference">GD</div>
                </th>
                <th scope="col" class="slds-text-align_center">
                  <div class="slds-truncate" title="Action">Action</div>
                </th>
              </tr>
            </thead>
            <tbody>
              <template for:each={teams} for:item="team">
                <tr key={team.Id}>
                  <td class="slds-text-align_center">{team.position}</td>
                  <td>
                    <a
                      data-id={team.Id}
                      data-name={team.Name}
                      class="slds-truncate"
                      title={team.Name}
                      onclick={handleTeamPlayers}
                      >{team.Name}</a
                    >
                  </td>
                  <td class="slds-text-align_right">
                    {team.Matches_Played__c}
                  </td>
                  <td class="slds-text-align_right">{team.Points__c}</td>
                  <td class="slds-text-align_right">
                    {team.Goal_Difference__c}
                  </td>
                  <td class="slds-text-align_center">
                    <a href={team.recordUrl} title="Go To Team">
                      <lightning-icon
                        icon-name="utility:forward"
                        alternative-text="Go To Team"
                        size="small"
                      ></lightning-icon>
                    </a>
                  </td>
                </tr>
              </template>
            </tbody>
          </table>
        </div>
      </template>
      <template if:true={showEmptyState}>
        <div class="slds-p-around_medium slds-text-color_weak">
          No teams found. Create teams to see the league table.
        </div>
      </template>
      <template if:true={error}>
        <div class="slds-text-color_error slds-m-top_small">
          There was a problem loading the league table.
        </div>
      </template>
    </div>
  </lightning-card>
</template>
